#!/usr/bin/env bash

set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

PYTHON_BIN="${PYTHON:-python3}"
if ! command -v "$PYTHON_BIN" >/dev/null 2>&1; then
  PYTHON_BIN="${PYTHON:-python}"
fi

if [[ $# -gt 0 && ( "$1" == "plan" || "$1" == "run" ) ]]; then
  COMMAND="$1"
  shift
else
  COMMAND="run"
fi

"$PYTHON_BIN" "$SCRIPT_DIR/axion_runner.py" "$COMMAND" "$@"
