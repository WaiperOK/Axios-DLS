# Конструктор Axion UI

Прототип дозволяє збирати сценарії Axion у вигляді графу React Flow, експортувати їх назад у DSL та запускати CLI безпосередньо з браузера.

## Полотно

- Кнопки на панелі зліва додають вузли `import`, `asset`, `scan`, `script`, `report`.
- Перетягуйте картки, щоби впорядковувати схему. З'єднуйте вузли за допомогою хендлів зверху/знизу. Недійсні зв'язки блокуються з підказкою.
- Подвійне клацання по картці відкриває інлайн‑редагування. У боковій панелі завжди видно активний вузол.

## Бокова панель

1. **Scenario** – можна вставити текстовий сценарій і натиснути **Import DSL** для відновлення графу. Парсер автоматично створить ребра між відповідними кроками.
2. **Node editor** – виділений вузол підсвічується; зміни синхронізуються з DSL прев'ю.
3. **DSL Preview** – живе відображення структури. Кнопка **Copy DSL** копіює текст назад у файл.

## Виконання

| Дія | Результат |
| --- | --- |
| **Run scenario** | Серіалізує граф у тимчасовий файл `examples/.ui-run-*.ax` та викликає `cargo run -p axion-cli -- run … --json`. |
| **CLI** | Будь-які команди CLI (Ctrl/Cmd + Enter). Підходить для `plan`, `schema`, запуску існуючих сценаріїв. |
| **Last run** | Показує розібраний JSON: summary, артефакти, звіт виконання. |
| **Logs** | Усі рядки stdout/stderr. Клік по запису відкриває повний текст у модальному вікні. |

Артефакти (наприклад, згенерований звіт) відображаються з назвою, типом та шляхом, якщо CLI їх повернув.

## Гарячі клавіші

- Подвійний клік – редагування вузла.
- `Del` – видалити вибраний вузол або ребро.
- `Ctrl/Cmd + Z` / `Ctrl/Cmd + Y` – undo/redo.
- `Ctrl/Cmd + Enter` – відправити команду CLI.
- Правою кнопкою миші – панорамування; колесо – масштаб; `Shift + колесо` – горизонтальне панорамування.

## Усунення проблем

- Якщо імпорт під час запуску не вдається, переконайтеся, що шляхи вказані відносно тимчасового файла (`examples/.ui-run-*.ax`). Модулі з каталогу `examples/modules` доступні без додаткових налаштувань.
- Дев‑сервер викликає CLI через Cargo, тому всі останні зміни Rust доступні одразу. Щоб використовувати зібраний бінарник, встановіть `AXION_USE_BINARY=1` перед стартом Vite.

## Подальші плани

UI залишається прототипом. У планах: потокові логи, розширена валідація, інтеграція з менеджером секретів (`docs/proposals/secrets-management.md`) та підключення зовнішніх інструментів для пентесту.
